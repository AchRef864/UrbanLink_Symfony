{% block body %}
  <div class="mySlides fade" style="display: {% if loop_index == currentIndex %}block{% else %}none{% endif %}">
    <div class="grid grid-cols-4 gap-4 p-4">
      <!-- Car Info Section -->
      <div class="col-span-1 row-span-3 bg-gray-200 p-4 rounded-lg">
        <div class="w-full bg-gray-400 rounded-lg mb-4">
          <img 
          src="{{ vehicle.image }}"
          class="w-full h-auto object-contain" 
          style="min-height: 200px;" 
          onload="console.log('Image loaded successfully')" 
          onerror="
            console.log('Image failed to load: ' + this.src);
            this.onerror=null;
            this.src='https://placehold.co/600x400';
          " 
          alt="{{ vehicle.brand }} {{ vehicle.model }}">
        </div>
        <p class="text-center">info</p>
        <p>{{ vehicle.licensePlate }}</p>
        <button id="openEditModal" class="mt-4 bg-blue-500 text-white px-4 py-2 rounded-lg w-full">
          Edit Vehicle
        </button>
      </div>

      <!-- Rest of your content remains the same -->
      <!-- Driver Info Section -->
      <div class="col-span-3 bg-gray-200 p-4 rounded-lg flex items-center justify-between">
        <div class="flex items-center gap-4">
          <div class="w-16 h-16 bg-gray-400 rounded-full"></div>
          <p>Driver Info</p>
          <p>{{ vehicle.driverId }}</p>
        </div>
        <div class="w-12 h-12 border-4 {{ vehicle.isVerified ? 'border-green-500' : 'border-red-500' }} rounded-full flex items-center justify-center">
          {% if vehicle.isVerified %}
            ✔
          {% else %}
            ✘
          {% endif %}
        </div>
      </div>

      <!-- Last Maintenance Date -->
      <div class="col-span-1 bg-gray-200 p-4 rounded-lg text-center">
        <p>Last Maintenance Date</p>
      </div>

      <!-- Maintenance History -->
      <div class="col-span-2 row-span-2 bg-gray-200 p-4 rounded-lg">
        <p>Maintenance History</p>
        <table class="table-auto">
          <thead>
            <tr>
              <th>Vehicle</th>
              <th>Maintenance</th>
              <th>Year</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{ vehicle.model }}</td>
              <td>Malcolm Lockyer</td>
              <td>1961</td>
            </tr>
            <tr>
              <td>{{ vehicle.model }}</td>
              <td>The Eagles</td>
              <td>1972</td>
            </tr>
            <tr>
              <td>{{ vehicle.model }}</td>
              <td>Earth, Wind, and Fire</td>
              <td>1975</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Maintenance Coloring Info -->
      <div class="col-span-1 bg-gray-200 p-4 rounded-lg text-center">
        <p>Coloring Depending on Last Maintenance Date</p>
      </div>

      <!-- Badges -->
      <div class="col-span-4 flex justify-center gap-4">
        <div class="w-12 h-12 bg-gray-400 rounded-full"></div>
        <div class="w-12 h-12 bg-gray-400 rounded-full"></div>
        <div class="w-12 h-12 bg-gray-400 rounded-full"></div>
        <div class="w-12 h-12 bg-gray-400 rounded-full"></div>
      </div>

      <!-- Buttons -->
      <div class="col-span-3 flex justify-end">
        <button class="bg-blue-500 text-white px-4 py-2 rounded-lg">
          Add Maintenance
        </button>
      </div>
      <div class="col-span-1">
        <form method="POST" action="{{ path('app_vehicle_delete', {'id': vehicle.id}) }}" onsubmit="return confirm('Are you sure you want to delete this vehicle?');">
          <button class="bg-red-500 text-white px-4 py-2 rounded-lg w-full">
            Delete Vehicle
          </button>
        </form>
      </div>
    </div>
  </div>

  {# Include the modal template here #}
  {% include 'utils/_eModal.html.twig' %}

{% endblock %}

{% block styles %}
<style>
  .border-red-500 {
      border-color: #EF4444; /* Tailwind's red-500 */
  }
</style>
{% endblock %}

{% block javascripts %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Get the modal
    var modal = document.getElementById("simpleModal");
    
    // Get the edit button
    var editBtn = document.getElementById("openEditModal");
    
    // Get the close button
    var closeBtn = document.getElementsByClassName("close-button")[0];
    
    // When the user clicks the edit button, open the modal
    editBtn.onclick = function() {
      modal.style.display = "block";
      document.body.style.overflow = "hidden"; // Prevent scrolling behind modal
    }
    
    // When the user clicks on close button, close the modal
    closeBtn.onclick = function() {
      modal.style.display = "none";
      document.body.style.overflow = "auto"; // Re-enable scrolling
    }
    
    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
        document.body.style.overflow = "auto"; // Re-enable scrolling
      }
    }
  });
</script>
{% endblock %}