{% extends 'base.html.twig' %}

{% block title %}Vehicle{% endblock %}

{% set show_vr = false %}
{% set show_docs = false %}

{% block body %}
    <div>
        <h1>Vehicle</h1>
        <p>Welcome to the Vehicle!</p>
    </div>

    {% include 'utils/_search.html.twig' %}

    {% if vehicles is not empty %}
        <!-- Slideshow container -->
        <div class="slideshow-container grid grid-cols-12 items-center gap-2 p-4">
            {% set prevIndex = (currentIndex - 1 >= 0) ? currentIndex - 1 : vehicles|length - 1 %}
            {% set nextIndex = (currentIndex + 1 < vehicles|length) ? currentIndex + 1 : 0 %}

            <!-- Previous Button (1 column) -->
            <a class="prev bg-gray-300 text-black px-2 py-1 rounded-lg text-center text-sm" 
               href="{{ path('app_vehicle_carousel', {'id': vehicles[currentIndex].id, 'action': 'prev'}) }}"> 
                &#10094;
            </a>

            <!-- Slide Container (10 columns) -->
            <div class="col-span-10 flex justify-center">
                {% for loop_index, vehicle in vehicles %}
                    {% include 'utils/_slide.html.twig' with {
                        'loop_index': loop_index,
                        'vehicle': vehicle,
                        'currentIndex': currentIndex
                    } %}
                {% endfor %}
            </div>

            <!-- Next Button (1 column) -->
            <a class="next bg-gray-300 text-black px-2 py-1 rounded-lg text-center text-sm" 
               href="{{ path('app_vehicle_carousel', {'id': vehicles[currentIndex].id, 'action': 'next'}) }}"> 
                &#10095;
            </a>
        </div>

        <!-- The dots/circles -->
        <div style="text-align:center">
            {% for i in 0..vehicles|length - 1 %}
                <span class="dot {{ i == currentIndex ? 'active' : '' }}"
                      onclick="window.location.href='{{ path('app_vehicle_carousel', {'id': vehicles[currentIndex].id, 'action': 'goTo', 'index': i}) }}'">
                </span>
            {% endfor %}
        </div>
    {% else %}
        <div class="p-4 bg-yellow-50 text-yellow-700 rounded-lg text-center shadow-md border border-yellow-200 my-6 mx-auto max-w-lg">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 mx-auto mb-2 text-yellow-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
            </svg>
            <p class="font-medium">No vehicles added at the moment.</p>
            <p class="text-sm mt-1 text-yellow-600">Add a vehicle to get started.</p>
        </div>
    {% endif %}

    <br>
    <div class="col-span-3 flex justify-end">
        <button id="openModal" class="bg-blue-500 text-white px-4 py-2 rounded-lg">
            Add Vehicle
        </button>
        {% include 'utils/_vModal.html.twig' %}
    </div>
{% endblock %}


{% block styles %}
    <style>
        * { box-sizing: border-box; }

        /* Slideshow container */
        .slideshow-container {
            max-width: 1000px;
            position: relative;
            margin: auto;
        }

        /* Hide the images by default */
        .mySlides {
            display: none;
        }

        /* Next & previous buttons */
        .prev, .next {
            cursor: pointer;
            position: absolute;
            top: 50%;
            width: auto;
            margin-top: -22px;
            padding: 16px;
            color: white;
            font-weight: bold;
            font-size: 18px;
            transition: 0.6s ease;
            border-radius: 0 3px 3px 0;
            user-select: none;
        }

        /* Position the "next button" to the right */
        .next {
            right: 0;
            border-radius: 3px 0 0 3px;
        }

        /* On hover, add a black background color with a little bit see-through */
        .prev:hover, .next:hover {
            background-color: rgba(0,0,0,0.8);
        }

        /* Caption text */
        .text {
            color: #f2f2f2;
            font-size: 15px;
            padding: 8px 12px;
            position: absolute;
            bottom: 8px;
            width: 100%;
            text-align: center;
        }

        /* Number text (1/3 etc) */
        .numbertext {
            color: #f2f2f2;
            font-size: 12px;
            padding: 8px 12px;
            position: absolute;
            top: 0;
        }

        /* The dots/bullets/indicators */
        .dot {
            cursor: pointer;
            height: 15px;
            width: 15px;
            margin: 0 2px;
            background-color: #bbb;
            border-radius: 50%;
            display: inline-block;
            transition: background-color 0.6s ease;
        }

        .active, .dot:hover {
            background-color: #717171;
        }

        /* Fading animation */
        .fade {
            animation-name: fade;
            animation-duration: 1.5s;
        }

        @keyframes fade {
            from { opacity: .4 }
            to { opacity: 1 }
        }
    </style>
{% endblock %}
